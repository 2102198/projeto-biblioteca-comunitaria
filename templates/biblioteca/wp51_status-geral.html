{% extends 'biblioteca/base.html' %}
{% block title%}Emprestimo{% endblock %}
{% block content %}
<div class="box">
    <h3 class="titulo_leitor">Status dos Livros Emprestados:</h3>                                    <!--resultado da busca-->
    <form class="box-filtro">
        <ul style="list-style-type:none" class="box-filtro-leitor">
            <li>
                <input name="leitor_id" class="form-control input-filtro" type="text" placeholder="ID Leitor" size="30" autocomplete="off">
            </li>
            <li>
                <input name="tombo" class="form-control input-filtro" type="text" placeholder="Tombo" size="30" autocomplete="off">
            </li>
            <li>
                <p class="filter-label">Data Emprestimo</p>
                <input name="data_emprestimo" class="form-control input-filtro" type="date">
            </li>
            <li>
                <p class="filter-label">Data Devolução</p>
                <input name="data_devolucao" class="form-control input-filtro" type="date">
            </li>
            <li>
                <p class="filter-label">Status</p>
                <select name='entrega' class="form-select input-filtro">
                    <option value=""></option>                    
                    <option value="Ativo">Entregue</option>
                    <option value="Desativo">Não Entregue</option>
            </select>
            </li>
        </ul>
        <ul style="list-style-type:none" class="box-filtro-leitor">
            <li >
                <button type="button" class="btn btn-outline-primary botao-filtro">Limpar</button>
            </li>
            <li>
                <button class="btn btn-primary botao-filtro" type="submit">Filtrar</button>
            </li>
        </ul>
    </form>
    <table class="table table-striped table-bordered table-condensed table-hover">      <!--criar tabela-->
        <thead>                         <!--cabeça da tabela-->
            <tr>                        <!--criar o nome das colunas-->
                <th width="10">ID_leitor</th>
                <th width="200">Leitor</th>
                <th width="10">Tombo</th>
                <th width="200">Livro</th>
                <th width="160">Data Empréstimo</th>
                <th width="140">Data Devolução Prevista</th>
                <th width="10">Status</th>
                <th width="10">Editar</th>
                <th width="10">Renovar +14 dias</th>
            </tr>
        </thead>
        <tbody>                         <!--criar o corpo da tabela-->
            {% for emprestimo in emprestimo %}
            <tr>
                <td>{{ emprestimo.leitor.leitor_id }}</td>
                <td>{{ emprestimo.leitor.nome }}</td>
                <td>{{ emprestimo.livro.tombo }}</td>
                <td>{{ emprestimo.livro.titulo }}</td>
                <td>{{ emprestimo.data_emprestimo }}</td>
                <td>{{ emprestimo.data_devolucao_prevista }}</td>
                <td>
                    {% if emprestimo.data_devolucao == None %}
                    Não Entregue
                    {% else %}
                    Entregue
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'emprestimo' %}/{{emprestimo.id}}">
                        <button class="botao-icone">&#x1F4DD</button>             <!--emoji &#x1F4DD editar-->
                    </a>
                </td>
                <td>
                    <form method="post">
                        {% csrf_token %}
                        <input name="id" value="{{emprestimo.id}}" type="hidden">
                        <button name="add_14_days" class="botao-icone" type="submit">&#x1F504</button>
                    </form>
                </td>      
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="teste">
        <span>
            {% if emprestimo.has_previous %}
                <a href="?page=1&leitor_id={{leitor_id}}&tombo={{tombo}}&data_emprestimo={{data_emprestimo}}&data_devolucao=&entrega={{entrega}}">&laquo; Primeira</a>
                <a href="?page={{ emprestimo.previous_page_number }}&leitor_id={{leitor_id}}&tombo={{tombo}}&data_emprestimo={{data_emprestimo}}&data_devolucao=&entrega={{entrega}}">Anterior</a>
            {% endif %}
    
            <span>
                Página {{ emprestimo.number }} de {{ emprestimo.paginator.num_pages }}.
            </span>
    
            {% if emprestimo.has_next %}
                <a href="?page={{ emprestimo.next_page_number }}&leitor_id={{leitor_id}}&tombo={{tombo}}&data_emprestimo={{data_emprestimo}}&data_devolucao=&entrega={{entrega}}">Próxima</a>
                <a href="?page={{ emprestimo.paginator.num_pages }}&leitor_id={{leitor_id}}&tombo={{tombo}}&data_emprestimo={{data_emprestimo}}&data_devolucao=&entrega={{entrega}}">lÚltima &raquo;</a>
            {% endif %}
        </span>
    </div>
</div>
{% endblock %}